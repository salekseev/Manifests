#!/bin/bash

# Cleaning hadoop logs older than 30 days in all hadoop related folders on /var/log

#"hdfs_log_dir_prefix": "/var/log/hadoop/hdfs",
#"yarn_log_dir_prefix": "/var/log/hadoop-yarn/yarn",


# HDFS Logs
cd <%= scope.lookupvar('logstash::params::hdfs_log_dir_prefix') %>
find . -atime 30 -exec rm -f {} \;

# Ambari-Agent Logs
cd <%= scope.lookupvar('logstash::params::ambari_agent_log_dir') %>
find . -atime 30 -exec rm -f {} \;

# YARN Logs 
cd <%= scope.lookupvar('logstash::params::yarn_log_dir_prefix') %>
find . -atime 30 -exec rm -f {} \;

